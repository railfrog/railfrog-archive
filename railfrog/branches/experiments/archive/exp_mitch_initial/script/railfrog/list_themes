#!/usr/bin/env ruby

print 'Loading railfrog system...'
require 'config/environment'
puts 'Done'

print "\n"
puts '=== Listing All Themes ==='
puts 'ID'.ljust(15) + 'Name'.ljust(20) + 'Author'.ljust(20) + 'Active?'

themes = []

Dir.foreach(Theme::get_path) do |theme|
  if File.exists?(Theme::get_path + '/' + theme + '/theme.yml') then
    yaml = YAML::load(File.open(Theme::get_path + '/' + theme + '/theme.yml', 'r'))
    yaml['id'] = theme
    yaml['active'] = Theme::current == theme
    themes.push yaml
  end
end

themes.sort! { |a,b| a['name'] <=> b['name'] }

themes.each do |theme|
  active = theme['active'] ? 'Yes' : 'No'
  puts theme['id'].ljust(15) + theme['name'].ljust(20) + theme['author'].ljust(20) + active
end