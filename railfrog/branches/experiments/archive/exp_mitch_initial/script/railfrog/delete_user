#!/usr/bin/env ruby

print 'Loading railfrog system...'
require 'config/environment'
puts 'Done'

print "\n"
puts "=== DELETE USER ==="
print 'Login: '
login_name = $stdin.gets.chomp

if (user = User.find_by_login(login_name)).nil?
  print "\n"
  puts "ERROR: User with that login doesn't exist."
  exit
end

result = ''
while result != 'y' and result != 'n'
  print "Attempting to destroy '#{login_name}'! Are you sure (Y/N)? "
  result = $stdin.gets.chomp.downcase
end

if result == 'n'
  print "\n"
  puts 'User was not deleted.'
  exit
end

user.destroy

print "\n"
puts "User deleted."